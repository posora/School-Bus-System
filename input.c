#include "public.h"
#include "input.h"
int input_name(char* username,int nx,int ny)//??????????????
{
	int i = 0;
	char temp[2] = {'\0','\0'};//?????????????????????????????
	int ch = 0;//?????��???bioskey????
	while (bioskey(1) != 0)
	{
		getch();
	}//??????????????????fflush()?��???
	while (1)
	{
		ch = bioskey(0);
		if ((username[i] = get_key(ch)) == '\0' && ch != 0xe08)
			break;
		if (ch == 0xe08 && i > 0)//????????backspace
		{
			username[i - 1] = '\0';
			setfillstyle(1, LIGHTGRAY);
			bar(nx + 20 * (i - 1) + 1, ny + 1, nx + 20 * i - 1, ny + 30 - 1);//?????????��???????????????????????��??,????????????????
			i = i - 2;
		}
		else if (ch != 0xe08 && i >= 0)
		{
			setcolor(BLUE);
			temp[0] = username[i];
			settextstyle(1, 0, 1);
			outtextxy(nx+10 + 20 * i, ny+5, temp);//?????????????
		}
		else
		{
			continue;
		}
		i++;
		if (i > 10)
			break;
	}
}
int input_password(char* password,int nx,int ny)
{
	int i = 0;
	int ch = 0;
	while (bioskey(1) != 0)
	{
		getch();
	}
	while (1)
	{
		ch = bioskey(0);
		if ((password[i] = get_key(ch)) == '\0' && ch != 0xe08)
			break;
		if (ch == 0xe08 && i > 0)//????????backspace
		{
			password[i - 1] = '\0';
			setfillstyle(1, LIGHTGRAY);
			bar(nx +20 *(i-1)+2, ny+1, nx + 5 + 20 *i+2, ny + 30-1);//?????????��?????????????????????��??
			i = i - 2;
		}
		else if (ch != 0xe08 && i >= 0)
		{
			password[i] = get_key(ch);
			setcolor(WHITE);
			circle(nx + 10 + 20 * i+2, ny + 15, 8);
			setfillstyle(1,BLUE);
			floodfill(nx + 10 + 20*i+2, ny + 15, WHITE);
		}
		else
		{
			continue;
		}
		i++;
		if (i > 10)
			break;
	}
}